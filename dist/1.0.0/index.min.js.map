{"version":3,"sources":["webpack://webbasicjs/webpack/bootstrap","webpack://webbasicjs/./src/lib/hash.ts","webpack://webbasicjs/./src/lib/str.ts","webpack://webbasicjs/./src/index.ts","webpack://webbasicjs/./src/lib/screen.ts","webpack://webbasicjs/./src/lib/ajax.ts","webpack://webbasicjs/./src/lib/date.ts","webpack://webbasicjs/./src/lib/cookie.ts","webpack://webbasicjs/./src/lib/form.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","stringify","obj","sep","eqs","buffer","keys","val","push","encodeURIComponent","JSON","join","parse","str","trim","length","split","kv","decodeURIComponent","pushOnHashChange","fn","pr","window","onhashchange","ev","this","getHash","location","hash","toString","substr","getData","HASH","splitFirstString","setData","data","splitter","pos","indexOf","screen","arr","ajax","date","cookie","form","getClientRect","dom","document","documentElement","top","clientTop","left","clientLeft","width","clientWidth","height","clientHeight","pushOnScreenResize","onresize","requestCommon","method","url","type","body","headers","Promise","resolve","reject","readyCallback","request","XMLHttpRequest","ActiveXObject","onreadystatechange","readyState","open","send","requestBase","undefined","state","OPENED","responseType","setRequestHeader","DONE","status","response","Error","statusText","post","FormData","append","Requester","prefix","_prefix","_data","_headers","format","toFormat","formatType","Date","buf","ch","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","set","expire","path","setTime","getTime","getExpireTime","toUTCString","cacheCookies","del","reload","loadCookies","getFormValues","objForm","HTMLFormElement","querySelector","tagName","toUpperCase","holder","elements","elem","checked","files","setFormValues","querySelectorAll","item","some","x","click","setSelectOptions","sel","HTMLSelectElement","options","forEach","element","add","Option","title"],"mappings":"2BACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,6qCClFrD,WASa,EAAAC,UACb,SAACC,EAAaC,EAAcC,GACxBD,EAAMA,GAAO,IACbC,EAAMA,GAAO,IAEb,IADA,IAAMC,EAAmB,GACzB,MAAgB1B,OAAO2B,KAAKJ,GAA5B,eAAkC,CAA7B,IAAIV,EAAG,KAEJe,EAAWL,EAAIV,GACnBa,EAAOG,KAAK,CAAChB,EAAKiB,mBAAmBC,KAAKT,UAAUM,KAAOI,KAAKP,IAEpE,OAAOC,EAAOM,KAAKR,IASV,EAAAS,MACb,SAACC,EAAaV,EAAcC,GACxB,IAAIC,EAAS,GAEb,GAAI,KADJQ,EAAMA,EAAIC,QACIC,OAAQ,OAAOV,EAC7BF,EAAMA,GAAO,IACbC,EAAMA,GAAO,IALmC,UAM/BS,EAAIG,MAAMb,IANqB,IAMhD,2BAAiC,KACzBc,EADyB,QACLD,MAAMZ,GAC9BzB,OAAOC,eACHyB,EACAY,EAAG,GACH,CAII/B,MAAOwB,KAAKE,MAAMM,mBAAmBD,EAAG,QAfJ,8BAoBhD,OAAOZ,GAUE,EAAAc,iBACb,SAACC,GACG,IAAMC,EAAKC,OAAOC,aAEdD,OAAOC,aADP,MAASF,EACaD,EAGA,SAAqCI,GACvDH,EAAGjD,KAAKqD,KAAMD,GACdJ,EAAGhD,KAAKqD,KAAMD,KAKb,EAAAE,QACb,WACI,IAAI1B,EAAIsB,OAAOK,SAASC,KAAKC,WAC7B,OAAO7B,EAAE8B,OAAO,EAAG9B,EAAEe,OAAS,IAMrB,EAAAgB,QACb,WACI,IAAMC,EAAO,EAAAC,iBAAiB,EAAAP,UAAW,KACzC,OAAO,EAAAd,MAAMoB,EAAK,KAMT,EAAAE,QACb,SAACC,GACG,IAAMH,EAAO,EAAAC,iBAAiB,EAAAP,UAAW,KACzCJ,OAAOK,SAASC,KAAhB,UAA0BI,EAAK,GAA/B,YAAqC,EAAA/B,UAAUkC,M,wGCxFtC,EAAAF,iBACb,SAACjC,EAAWoC,GACR,IAAMC,EAAMrC,EAAEsC,QAAQF,GACtB,OAAK,IAAMC,EACA,CAACrC,EAAG,IAEJ,CACHA,EAAE8B,OAAO,EAAGO,GACZrC,EAAE8B,OAAOO,EAAM,EAAGrC,EAAEe,OAASsB,EAAM,M,+ICZ/C,WAUI,EAAAE,SATJ,WAUI,EAAAX,OATJ,WAUI,EAAAf,MATJ,WAUI,EAAA2B,MATJ,WAUI,EAAAC,OATJ,WAUI,EAAAC,OATJ,WAUI,EAAAC,SATJ,WAUI,EAAAC,Q,0HCZS,EAAAC,cACb,WACI,IAAMC,EAAMC,SAASC,gBACrB,MAAO,CACHC,IAAKH,EAAII,UACTC,KAAML,EAAIM,WACVC,MAAOP,EAAIQ,YACXC,OAAQT,EAAIU,eAcP,EAAAC,mBACb,SAACrC,GACG,IAAMC,EAAKC,OAAOoC,SAEdpC,OAAOoC,SADP,MAASrC,EACSD,EAGA,SAAqCI,GACnDH,EAAGjD,KAAKqD,KAAgBD,GACxBJ,EAAGhD,KAAKqD,KAAgBD,M,mWCrCpC,WA+BMmC,EAAgB,SAClBC,EACAC,EACAC,EACAC,EACAC,GAEA,OAAO,IAAIC,SAAQ,SAACC,EAAcC,IA/BtC,SACIP,EACAC,EACAE,EACAK,GAEA,IAAMC,EACF/C,OAAOgD,eACH,IAAIA,eACJ,IAAIC,cAAc,qBAE1BF,EAAQG,mBAAqB,SAAgChD,GAQzD4C,EAAc3C,KAAKgD,WAAYhD,KAAMD,IAEzC6C,EAAQK,KAAKd,EAAQC,GACrBQ,EAAQM,KAAKZ,GAUTa,CAAYhB,EAAQC,OAAMgB,IAAcd,EAAO,KAAOA,GAAO,SAACe,EAAOT,EAAS7C,GAC1E,OAAQsD,GACJ,KAAKR,eAAeS,OAIhB,GAFAV,EAAQW,aAAelB,GAAQ,OAE3Be,MAAcb,EAA6B,MAC/C,cAAgBrF,OAAO2B,KAAK0D,GAA5B,eAAsC,CAAjC,IAAIxE,EAAG,KAER6E,EAAQY,iBAAiBzF,EAAKwE,EAAQxE,IAE1C,MACJ,KAAK8E,eAAeY,KAEZb,EAAQc,QAAU,KAAOd,EAAQc,OAAS,KAC1C,MAAQd,EAAQc,OAIhBjB,EAAQG,EAAQe,UAEhBjB,EAAO,IAAIkB,MAAMhB,EAAQiB,qBASpC,EAAAxG,IAAM,SACf+E,EACAC,EACA3B,EACA6B,GAKA,OAHIa,MAAc1C,IACd0B,EAAM,GAAH,OAAMA,EAAN,YAAajC,EAAK3B,UAAUkC,KAE5BwB,EAAc,MAAOE,EAAKC,EAAM,KAAME,IAGpC,EAAAuB,KAAO,SAChB1B,EACAC,EACA3B,EACA6B,GAEA,IAAIpB,EAAO,KACX,GAAIiC,MAAc1C,EACd,GAAIA,aAAgBqD,SAChB5C,EAAOT,MACJ,CACHS,EAAO,IAAI4C,SACX,cAAgB7G,OAAO2B,KAAK6B,GAA5B,eAAmC,CAA9B,IAAI3C,EAAG,KAERoD,EAAK6C,OAAOjG,EAAK2C,EAAK3C,KAIlC,OAAOmE,EAAc,OAAQE,EAAKC,EAAMlB,EAAMoB,I,IAGrC0B,E,WAsBT,WAAYC,EAAwBxD,EAAsB6B,I,4FAAuB,SAC7EvC,KAAKmE,QAAWf,MAAcc,EAA6B,GAAKA,EAChElE,KAAKoE,MAAShB,MAAc1C,EAAyB,GAAKA,EAC1DV,KAAKqE,SAAYjB,MAAcb,EAA+B,GAAKA,E,mDAInEH,EACAC,EACA3B,EACA6B,GAIA,OAFA7B,EAAOA,GAAQ,GACf6B,EAAUA,GAAW,GACd,EAAAlF,IACH2C,KAAKmE,QAAU/B,EACfC,EAAI,+BACArC,KAAKoE,OAAU1D,GAAI,+BACnBV,KAAKqE,UAAa9B,M,2BAK1BH,EACAC,EACA3B,EACA6B,GAIA,OAFA7B,EAAOA,GAAQ,GACf6B,EAAUA,GAAW,GACd,EAAAuB,KACH9D,KAAKmE,QAAU/B,EACfC,EAAI,+BACArC,KAAKoE,OAAU1D,GAAI,+BACnBV,KAAKqE,UAAa9B,M,8BAItBH,EAAa1B,EAAe6B,GAChC,OAAO,EAAAlF,IAAI+E,EAAK,OAAQ1B,EAAM6B,K,+BAEzBH,EAAa1B,EAAe6B,GACjC,OAAO,EAAAuB,KAAK1B,EAAK,OAAQ1B,EAAM6B,K,8BAE3BH,EAAa1B,EAAe6B,GAChC,OAAO,EAAAlF,IAAI+E,EAAK,OAAQ1B,EAAM6B,K,+BAEzBH,EAAa1B,EAAe6B,GACjC,OAAO,EAAAuB,KAAK1B,EAAK,OAAQ1B,EAAM6B,K,6BApE/B,OAAOvC,KAAKmE,S,aAEL1G,GACPuC,KAAKmE,QAAU1G,I,2BAGf,OAAOuC,KAAKoE,O,aAEP3G,GACLuC,KAAKoE,MAAQ3G,I,8BAGb,OAAOuC,KAAKqE,U,aAEJ5G,GACRuC,KAAKqE,SAAW5G,O,gCAjBxB,e,8FCjGa,EAAA6G,OACb,SAACC,EAAoCC,GAE7BD,OADAnB,IAAcmB,EACH,IAAIE,KAEHF,aAAoBE,KAAQF,EAAW,IAAIE,KAAKF,GAChEC,EAAaA,GAAc,gBAG3B,IADA,IAAME,EAA8B,GAC5BlI,EAAE,EAAGA,EAAEgI,EAAWlF,OAAQ9C,IAAK,CACnC,IAAImI,EAAKH,EAAWnE,OAAO7D,EAAG,GAC9B,OAAOmI,GACH,IAAK,IAAKD,EAAI3F,KAAKwF,EAASK,eAAgB,MAC5C,IAAK,IAAKF,EAAI3F,KAAKwF,EAASM,WAAW,GAAI,MAC3C,IAAK,IAAKH,EAAI3F,KAAKwF,EAASO,WAAY,MACxC,IAAK,IAAKJ,EAAI3F,KAAKwF,EAASQ,YAAa,MACzC,IAAK,IAAKL,EAAI3F,KAAKwF,EAASS,cAAe,MAC3C,IAAK,IAAKN,EAAI3F,KAAKwF,EAASU,cAAe,MAC3C,IAAK,IAAKP,EAAI3F,KAAKwF,EAASW,mBAAoB,MAChD,QAASR,EAAI3F,KAAK4F,IAG1B,OAAOD,EAAIxF,KAAK,M,wnCCMP,EAAAiG,IAAM,SACfpI,EAAcU,EAAkB2H,EAAmBC,GAEnDD,EA9BkB,SAACA,GAEnB,GAAIA,aAAkBX,KAClB,OAAOW,EAGX,GAAI,iBAAoBA,EACpB,OAAO,IAAIX,KAAKW,GAGpB,GAAI,iBAAoBA,EAAQ,CAC5B,IAAInE,EAAO,IAAIwD,KAEf,OADAxD,EAAKqE,QAAQrE,EAAKsE,UAAsB,IAATH,GACxBnE,GAiBFuE,CAAcJ,GACvB,IAAMxG,EAAS,GAEfA,EAAOG,KAAKhC,EAAKsC,QACjBT,EAAOG,KAAK,KACZH,EAAOG,KAAKC,mBAAmBC,KAAKT,UAAUf,UAE1C2F,IAAcgC,IACdxG,EAAOG,KAAK,aACZH,EAAOG,KAAKqG,EAAOK,qBAGnBrC,IAAciC,IACdzG,EAAOG,KAAK,UACZH,EAAOG,KAAKsG,IAEhB/D,SAASJ,OAAStC,EAAOM,KAAK,IAE9BwG,OAAetC,GAQN,EAAAuC,IAAM,SAAC5I,EAAcsI,GAC9B,IAAMzG,EAAS,GAEfA,EAAOG,KAAKhC,EAAKsC,QACjBT,EAAOG,KAAK,KAEZH,EAAOG,KAAK,aACZH,EAAOG,MAAK,IAAI0F,MAAOgB,oBAEnBrC,IAAciC,IACdzG,EAAOG,KAAK,UACZH,EAAOG,KAAKsG,IAEhB/D,SAASJ,OAAStC,EAAOM,KAAK,IAE9BwG,OAAetC,GAInB,IAAIsC,OAAmCtC,EA2B1B,EAAA/F,IAAM,SACfN,EACA6I,GAIA,YAFIxC,IAAcsC,IAAgB,IAASE,GA3B/C,WACIF,EAAe,GACf,IAFgB,MAEFpE,SAASJ,OAAO3B,MAAM,MAFpB,IAGhB,2BAA0B,KAClBC,EADkB,QACRH,OAAOE,MAAM,KAC3BrC,OAAOC,eACHuI,EACAlG,EAAG,GACH,CAII/B,MAAOwB,KAAKE,MAAMM,mBAAmBD,EAAG,QAZpC,+BA2BmCqG,GAE5CH,EAAa3I,K,ypCCrEX,EAAA+I,cAAgB,SACzB3E,GAEA,IAAI4E,EAAU5E,aAAgB6E,gBAC1B7E,EACAG,SAAS2E,cAAc9E,GAC3B,GAAI,SAAW4E,EAAQG,QAAQC,cAAe,OAAO,KAGrD,IAPe,EAOXC,EAAS,GAPE,IAQKL,EAAQM,UARb,IAQf,2BAAsC,KAE9BC,EAF8B,QAGlC,GAAI,OAASA,EAAKvJ,MAAQ,OAASuJ,EAAKjE,KAGxC,OAAQiE,EAAKjE,MAET,IAAK,QACD,IAAKiE,EAAKC,QAAS,MACnBrJ,OAAOC,eAAeiJ,EAAQE,EAAKvJ,KAAM,CAAEU,MAAO6I,EAAK7I,QACvD,MAGJ,IAAK,WACI2I,EAAO/H,eAAeiI,EAAKvJ,OAC5BG,OAAOC,eAAeiJ,EAAQE,EAAKvJ,KAAM,CAAEU,MAAO,KAElD6I,EAAKC,SAELH,EAAOE,EAAKvJ,MAAMgC,KAAKuH,EAAK7I,OAEhC,MAEJ,IAAK,OACG6I,EAAKE,MAAMlH,OAAS,GACpBpC,OAAOC,eAAeiJ,EAAQE,EAAKvJ,KAAM,CAAEU,MAAO6I,EAAKE,MAAM,KAEjE,MAEJ,IAAK,aAEL,IAAK,OACL,IAAK,WACL,IAAK,SACL,IAAK,QACL,IAAK,QAEL,IAAK,OACL,IAAK,OACL,IAAK,WACL,IAAK,iBACL,IAAK,OACL,IAAK,QACL,IAAK,OAEL,IAAK,QAEL,IAAK,WACD,GAAIJ,EAAO/H,eAAeiI,EAAKvJ,MAAO,MACtCG,OAAOC,eAAeiJ,EAAQE,EAAKvJ,KAAM,CAAEU,MAAO6I,EAAK7I,UA1DpD,8BAgEf,OAAO2I,GAIE,EAAAK,cAAgB,SACzBtF,EACAT,GAEA,IAAIqF,EAAU5E,aAAgB6E,gBAC1B7E,EACAG,SAAS2E,cAAc9E,GAC3B,GAAI,SAAW4E,EAAQG,QAAQC,cAG/B,cAAiBjJ,OAAO2B,KAAK6B,GAA7B,eAAoC,CAA/B,IAAI3D,EAAI,KAEHU,EAAQiD,EAAK3D,GAEbsJ,EAAWN,EAAQW,iBAAR,sBAAwC3J,EAAxC,2BAA+DA,EAA/D,6BAAwFA,EAAxF,OACjB,GAAI,IAAMsJ,EAAS/G,OAEnB,OAAQ+G,EAAS,GAAGhE,MAChB,IAAK,QAAL,UACqBgE,GADrB,IACI,2BAA2B,KAAlBM,EAAkB,QACnB,UAAYA,EAAKtE,OACjBsE,EAAKJ,QAAW9I,GAASkJ,EAAKlJ,QAH1C,8BAKM,MACN,IAAK,WAAL,UACqB4I,GADrB,yBACaM,EADb,QAEY,aAAeA,EAAKtE,OACpBsE,EAAKJ,QAAW9I,EAAwBmJ,MAAK,SAAAC,GAAC,OAAIA,GAAKF,EAAKlJ,WAFpE,2BAA2B,IAD/B,8BAKM,MACN,IAAK,OACD4I,EAAS,GAAGS,QAChB,QACIT,EAAS,GAAG5I,MAAQA,KAYvB,EAAAsJ,iBAAmB,SAC5BC,EACAtG,GAEA,IAAIjC,EAAMuI,aAAeC,kBACrBD,EACA1F,SAAS2E,cAAce,GACvB,WAAavI,EAAIyH,QAAQC,gBAC7B1H,EAAIyI,QAAQ5H,OAAS,EACrBoB,EAAKyG,SAAQ,SAAAC,GACT3I,EAAI4I,IAAI,IAAIC,OAAOF,EAAQG,MAAOH,EAAQ3J","file":"index.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","import { splitFirstString } from \"./str\";\r\n\r\n\r\n/**\r\n * Object->String\r\n * @param obj DataHolder\r\n * @param sep Separator\r\n * @param eqs Equal-sign\r\n */\r\nexport const stringify =\r\n(obj: object, sep?: string, eqs?: string): string => {\r\n    sep = sep || '&';\r\n    eqs = eqs || '=';\r\n    const buffer: string[] = [];\r\n    for (let key of Object.keys(obj)) {\r\n        // @ts-ignore\r\n        let val: any = obj[key];\r\n        buffer.push([key, encodeURIComponent(JSON.stringify(val))].join(eqs));\r\n    }\r\n    return buffer.join(sep);\r\n};\r\n\r\n/**\r\n * String->Dict\r\n * @param str\r\n * @param sep\r\n * @param eqs\r\n */\r\nexport const parse =\r\n(str: string, sep?: string, eqs?: string): object => {\r\n    let buffer = {};\r\n    str = str.trim();\r\n    if (0 === str.length) return buffer;\r\n    sep = sep || '&';\r\n    eqs = eqs || '=';\r\n    for (let item of str.split(sep)) {\r\n        let kv: string[] = item.split(eqs);\r\n        Object.defineProperty(\r\n            buffer,\r\n            kv[0],\r\n            {\r\n                // enumerable: false,\r\n                // configurable: false,\r\n                // writable: false,\r\n                value: JSON.parse(decodeURIComponent(kv[1]))\r\n            }\r\n        );\r\n        // buffer[kv[0]] = JSON.parse(decodeURIComponent(kv[1]));\r\n    }\r\n    return buffer;\r\n};\r\n\r\nexport interface onHashChangeCallback {\r\n    (this: WindowEventHandlers, ev: Event) : any\r\n};\r\n\r\n/**\r\n * Catch HashChange\r\n */\r\nexport const pushOnHashChange =\r\n(fn: onHashChangeCallback): void => {\r\n    const pr = window.onhashchange as onHashChangeCallback;\r\n    if (null === pr || undefined === pr) {\r\n        window.onhashchange = fn;\r\n    } else {\r\n        // 方法链\r\n        window.onhashchange = function (this: WindowEventHandlers, ev: Event): any {\r\n            pr.call(this, ev);\r\n            fn.call(this, ev);\r\n        }\r\n    }\r\n};\r\n\r\nexport const getHash =\r\n(): string => {\r\n    let s = window.location.hash.toString();\r\n    return s.substr(1, s.length - 1);\r\n}\r\n\r\n/**\r\n * 读取Hash值中?后的数据\r\n */\r\nexport const getData =\r\n(): object | null => {\r\n    const HASH = splitFirstString(getHash(), '?');\r\n    return parse(HASH[1]);\r\n};\r\n\r\n/**\r\n * 设置Hash值中?后的数据\r\n */\r\nexport const setData =\r\n(data: object): void => {\r\n    const HASH = splitFirstString(getHash(), '?');\r\n    window.location.hash = `${HASH[0]}?${stringify(data)}`;\r\n};","\n/**\n * 以左侧第一次发现的splitter将字符串切割为两部分\n * @param s 被切割的字符串\n * @param splitter 切割字符\n */\nexport const splitFirstString =\n(s: string, splitter: string): Array<string> => {\n    const pos = s.indexOf(splitter);\n    if (-1 === pos) {\n        return [s, \"\"];\n    } else {\n        return [\n            s.substr(0, pos),\n            s.substr(pos + 1, s.length - pos - 1)\n        ];\n    }\n}\n","// import(\"@babel/polyfill\");  // 兼容低版本浏览器Promise\r\n\r\nimport * as screen from \"./lib/screen\";\r\nimport * as hash from \"./lib/hash\";\r\nimport * as str from \"./lib/str\";\r\nimport * as arr from \"./lib/arr\";\r\nimport * as ajax from \"./lib/ajax\";\r\nimport * as date from \"./lib/date\";\r\nimport * as cookie from \"./lib/cookie\";\r\nimport * as form from \"./lib/form\";\r\n\r\nexport {\r\n    screen,\r\n    hash,\r\n    str,\r\n    arr,\r\n    ajax,\r\n    date,\r\n    cookie,\r\n    form\r\n}\r\n\r\n// file: require(\"./lib/file\"),\r\n","export interface Rect {\r\n    top: number,\r\n    left: number,\r\n    width: number,\r\n    height: number\r\n};\r\n\r\nexport const getClientRect =\r\n(): Rect => {\r\n    const dom = document.documentElement;\r\n    return {\r\n        top: dom.clientTop,\r\n        left: dom.clientLeft,\r\n        width: dom.clientWidth,\r\n        height: dom.clientHeight\r\n    } as Rect;\r\n};\r\n\r\nexport interface onScreenResizeCallback {\r\n    (\r\n        this: GlobalEventHandlers | null,\r\n        ev: UIEvent | null\r\n    ): any\r\n};\r\n\r\n/**\r\n * 添加尺寸调整响应\r\n */\r\nexport const pushOnScreenResize =\r\n(fn: onScreenResizeCallback): void => {\r\n    const pr = window.onresize as onScreenResizeCallback;\r\n    if (null === pr || undefined === pr) {\r\n        window.onresize = fn;\r\n    } else {\r\n        // 方法链\r\n        window.onresize = function (this: GlobalEventHandlers, ev: UIEvent): any {\r\n            pr.call(this as Window, ev);\r\n            fn.call(this as Window, ev);\r\n        }\r\n    }\r\n};","import * as hash from \"./hash\";\r\n\r\n\r\ninterface onStateChangeCallback {\r\n    (state: number, request: XMLHttpRequest, ev: Event): void\r\n}\r\nconst requestBase =\r\n(\r\n    method: string,\r\n    url: string,\r\n    body: BodyInit | null,\r\n    readyCallback: onStateChangeCallback\r\n) => {\r\n    const request: XMLHttpRequest =\r\n        window.XMLHttpRequest ?\r\n            new XMLHttpRequest() :\r\n            new ActiveXObject(\"Microsoft.XMLHTTP\")\r\n        ;\r\n    request.onreadystatechange = function (this: XMLHttpRequest, ev: Event) {\r\n        /*readyState\r\n            0 === XMLHttpRequest.UNSENT\r\n            1 === XMLHttpRequest.OPENED\r\n            2 === XMLHttpRequest.HEADERS_RECEIVED\r\n            3 === XMLHttpRequest.LOADING\r\n            4 === XMLHttpRequest.DONE\r\n        */\r\n        readyCallback(this.readyState, this, ev);\r\n    };\r\n    request.open(method, url);\r\n    request.send(body);\r\n};\r\nconst requestCommon = (\r\n    method: string,\r\n    url: string,\r\n    type?: XMLHttpRequestResponseType | undefined,\r\n    body?: BodyInit | undefined | null,\r\n    headers?: object | undefined | null\r\n): Promise<any> => {\r\n    return new Promise((resolve: any, reject) => {\r\n        requestBase(method, url, (undefined === body ? null : body), (state, request, ev) => {\r\n            switch (state) {\r\n                case XMLHttpRequest.OPENED:\r\n                    // 设置接受值\r\n                    request.responseType = type || 'text';\r\n                    // 设置请求头\r\n                    if (undefined === headers || null === headers) break;\r\n                    for (let key of Object.keys(headers)) {\r\n                        // @ts-ignore\r\n                        request.setRequestHeader(key, headers[key]);\r\n                    }\r\n                    break;\r\n                case XMLHttpRequest.DONE:\r\n                    if (\r\n                        request.status >= 200 && request.status < 300 ||\r\n                        304 === request.status /* ReadCache */\r\n                    ) {\r\n                        // request.response\r\n                        // request.getAllResponseHeaders()\r\n                        resolve(request.response);\r\n                    } else {\r\n                        reject(new Error(request.statusText));\r\n                    }\r\n                    break;\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\n\r\nexport const get = (\r\n    url: string,\r\n    type?: XMLHttpRequestResponseType,\r\n    data?: object,\r\n    headers?: object\r\n) => {\r\n    if (undefined !== data && null !== data) {\r\n        url = `${url}?${hash.stringify(data)}`;\r\n    }\r\n    return requestCommon(\"GET\", url, type, null, headers);\r\n};\r\n\r\nexport const post = (\r\n    url: string,\r\n    type?: XMLHttpRequestResponseType,\r\n    data?: object | FormData,\r\n    headers?: object\r\n) => {\r\n    let form = null;\r\n    if (undefined !== data && null !== data) {\r\n        if (data instanceof FormData) {\r\n            form = data;\r\n        } else {\r\n            form = new FormData();\r\n            for (let key of Object.keys(data)) {\r\n                // @ts-ignore\r\n                form.append(key, data[key]);\r\n            }\r\n        }\r\n    }\r\n    return requestCommon(\"POST\", url, type, form, headers);\r\n};\r\n\r\nexport class Requester {\r\n    get prefix(): string {\r\n        return this._prefix;\r\n    }\r\n    set prefix(value: string) {\r\n        this._prefix = value;\r\n    }\r\n    get data(): object {\r\n        return this._data;\r\n    }\r\n    set data(value: object) {\r\n        this._data = value;\r\n    }\r\n    get headers(): object {\r\n        return this._headers;\r\n    }\r\n    set headers(value: object) {\r\n        this._headers = value;\r\n    }\r\n    private _prefix: string;\r\n    private _data: object;\r\n    private _headers: object;\r\n    constructor(prefix?: string | null, data?: object | null, headers?: object | null) {\r\n        this._prefix = (undefined === prefix || null === prefix) ? \"\" : prefix;\r\n        this._data = (undefined === data || null === data) ? {} : data;\r\n        this._headers = (undefined === headers || null === headers) ? {} : headers;\r\n    }\r\n\r\n    get(\r\n        url: string,\r\n        type?: XMLHttpRequestResponseType,\r\n        data?: object | null,\r\n        headers?: object | null\r\n    ) {\r\n        data = data || {};\r\n        headers = headers || {};\r\n        return get(\r\n            this._prefix + url,\r\n            type,\r\n            {...this._data, ...data},\r\n            {...this._headers, ...headers}\r\n        );\r\n    }\r\n\r\n    post(\r\n        url: string,\r\n        type?: XMLHttpRequestResponseType,\r\n        data?: object | null,\r\n        headers?: object | null\r\n    ) {\r\n        data = data || {};\r\n        headers = headers || {};\r\n        return post(\r\n            this._prefix + url,\r\n            type,\r\n            {...this._data, ...data},\r\n            {...this._headers, ...headers}\r\n        );\r\n    }\r\n\r\n    getJson(url: string, data?: object, headers?: object) {\r\n        return get(url, \"json\", data, headers);\r\n    }\r\n    postJson(url: string, data?: object, headers?: object) {\r\n        return post(url, \"json\", data, headers);\r\n    }\r\n    getBlob(url: string, data?: object, headers?: object) {\r\n        return get(url, \"blob\", data, headers);\r\n    }\r\n    postBlob(url: string, data?: object, headers?: object) {\r\n        return post(url, \"blob\", data, headers);\r\n    }\r\n};\r\n","/**\r\n * 日期格式化\r\n * @param toFormat\r\n * @param formatType\r\n */\r\nexport const format =\r\n(toFormat? : Date | string | number, formatType?: string) => {\r\n    if (undefined === toFormat)\r\n        toFormat = new Date();\r\n    else\r\n        toFormat = (toFormat instanceof Date) ? toFormat : new Date(toFormat);\r\n    formatType = formatType || 'y-M-d h:m:s S';\r\n\r\n    const buf: Array<string | number> = [];\r\n    for(let i=0; i<formatType.length; i++) {\r\n        let ch = formatType.substr(i, 1);\r\n        switch(ch) {\r\n            case 'y': buf.push(toFormat.getFullYear()); break;\r\n            case 'M': buf.push(toFormat.getMonth()+1); break;\r\n            case 'd': buf.push(toFormat.getDate()); break;\r\n            case 'h': buf.push(toFormat.getHours()); break;\r\n            case 'm': buf.push(toFormat.getMinutes()); break;\r\n            case 's': buf.push(toFormat.getSeconds()); break;\r\n            case 'S': buf.push(toFormat.getMilliseconds()); break;\r\n            default: buf.push(ch); break;\r\n        }\r\n    }\r\n    return buf.join('');\r\n};\r\n","\r\ntype DateType = Date | string | number;\r\n/**\r\n * 获取到期时间\r\n * @param expire\r\n */\r\nconst getExpireTime = (expire?: DateType) => {\r\n    // Date\r\n    if (expire instanceof Date) {\r\n        return expire;\r\n    }\r\n    // String\r\n    if ('string' === typeof expire) {\r\n        return new Date(expire);\r\n    }\r\n    // Number\r\n    if ('number' === typeof expire) {\r\n        let date = new Date();\r\n        date.setTime(date.getTime() + (expire * 1000));\r\n        return date;\r\n    }\r\n    // Undefined\r\n    return undefined;\r\n}\r\n\r\ntype ValueType = object | string | number;\r\n/**\r\n * 设置Cookie\r\n * @param name\r\n * @param value\r\n * @param expire\r\n * @param path\r\n */\r\nexport const set = (\r\n    name: string, value: ValueType, expire?: DateType, path?: string\r\n) => {\r\n    expire = getExpireTime(expire);\r\n    const buffer = [];\r\n    // K-V\r\n    buffer.push(name.trim());\r\n    buffer.push('=');\r\n    buffer.push(encodeURIComponent(JSON.stringify(value)));\r\n    // expire\r\n    if (undefined !== expire) {\r\n        buffer.push(';expires=');\r\n        buffer.push(expire.toUTCString());\r\n    }\r\n    // path\r\n    if (undefined !== path) {\r\n        buffer.push(';path=');\r\n        buffer.push(path);\r\n    }\r\n    document.cookie = buffer.join('');\r\n    // 重置缓存\r\n    cacheCookies = undefined;\r\n}\r\n\r\n/**\r\n * 删除Cookie\r\n * @param name\r\n * @param path\r\n */\r\nexport const del = (name: string, path: string) => {\r\n    const buffer = [];\r\n    // K-V\r\n    buffer.push(name.trim());\r\n    buffer.push('=');\r\n    // expires\r\n    buffer.push(';expires=');\r\n    buffer.push(new Date().toUTCString());\r\n    // path\r\n    if (undefined !== path) {\r\n        buffer.push(';path=');\r\n        buffer.push(path);\r\n    }\r\n    document.cookie = buffer.join('');\r\n    // 重置缓存\r\n    cacheCookies = undefined;\r\n}\r\n\r\n\r\nlet cacheCookies: undefined | object = undefined;\r\n/**\r\n * 加载Cookie\r\n */\r\nfunction loadCookies() {\r\n    cacheCookies = {};\r\n    let cookies = document.cookie.split(';');\r\n    for (let item of cookies) {\r\n        let kv = item.trim().split('=');\r\n        Object.defineProperty(\r\n            cacheCookies,\r\n            kv[0],\r\n            {\r\n                // enumerable: false,\r\n                // configurable: false,\r\n                // writable: false,\r\n                value: JSON.parse(decodeURIComponent(kv[1]))\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * 获得Cookie\r\n * @param name\r\n * @param reload 刷新缓存\r\n */\r\nexport const get = (\r\n    name: string,\r\n    reload?: boolean\r\n): ValueType => {\r\n    if (undefined === cacheCookies || true === reload) loadCookies();\r\n    // @ts-ignore\r\n    return cacheCookies[name];\r\n}","/*\r\n        <form>\r\n            <input type=\"radio\" name=\"radio\" value=\"T\" />\r\n            <input type=\"radio\" name=\"radio\" value=\"F\" />\r\n            <br>\r\n\r\n            <input type=\"checkbox\" name=\"checkbox\" value=\"A\" />\r\n            <input type=\"checkbox\" name=\"checkbox\" value=\"B\" />\r\n            <input type=\"checkbox\" name=\"checkbox\" value=\"C\" />\r\n            <br>\r\n\r\n            <select name=\"select\">\r\n                <option value=\"A\">A</option>\r\n                <option value=\"B\">B</option>\r\n                <option value=\"C\">C</option>\r\n                <option value=\"D\">D</option>\r\n            </select>\r\n            <br>\r\n\r\n            <input type=\"file\" name=\"file\" value=\"\" /><br>\r\n\r\n            <input type=\"text\" name=\"text\" value=\"text\" /><br>\r\n            <input type=\"password\" name=\"password\" value=\"password\" /><br>\r\n            <input type=\"number\" name=\"number\" value=\"999\" /><br>\r\n            <input type=\"range\" name=\"range\" value=\"999\" /><br>\r\n            <input type=\"email\" name=\"email\" value=\"666@abc.com\" /><br>\r\n\r\n            <input type=\"date\" name=\"date\" value=\"1999-10-10\" /><br>\r\n            <input type=\"time\" name=\"time\" value=\"\" /><br>\r\n\r\n            <input type=\"color\" name=\"color\" value=\"\" /><br>\r\n\r\n            <textarea name=\"textarea\">大文本</textarea>\r\n        </form>\r\n*/\r\n\r\ninterface Element {\r\n    name: string | null,\r\n    type: string | null\r\n    value: string | null\r\n    checked: boolean,\r\n    files: FileList,\r\n    click: () => void\r\n}\r\n\r\nexport const getFormValues = (\r\n    form: HTMLFormElement | string\r\n): object | null => {\r\n    let objForm = form instanceof HTMLFormElement ?\r\n        form :\r\n        document.querySelector(form) as HTMLFormElement;\r\n    if ('FORM' !== objForm.tagName.toUpperCase()) return null;\r\n\r\n\r\n    let holder = {};\r\n    for (let element of objForm.elements) {\r\n        // @ts-ignore\r\n        let elem = element as Element;\r\n        if (null === elem.name || null === elem.type) continue;\r\n        // console.log(elem.name, elem.type, elem.value, elem.checked);\r\n\r\n        switch (elem.type) {\r\n            // input radio\r\n            case 'radio':\r\n                if (!elem.checked) break;\r\n                Object.defineProperty(holder, elem.name, { value: elem.value });\r\n                break;\r\n\r\n            // input checkbox\r\n            case 'checkbox':\r\n                if (!holder.hasOwnProperty(elem.name)) {\r\n                    Object.defineProperty(holder, elem.name, { value: [] });\r\n                }\r\n                if (elem.checked) {\r\n                    // @ts-ignore\r\n                    holder[elem.name].push(elem.value);\r\n                }\r\n                break;\r\n            // input file\r\n            case 'file':\r\n                if (elem.files.length > 0) {\r\n                    Object.defineProperty(holder, elem.name, { value: elem.files[0] });\r\n                }\r\n                break;\r\n            // select\r\n            case 'select-one':\r\n            // input\r\n            case 'text':\r\n            case 'password':\r\n            case 'number':\r\n            case 'email':\r\n            case 'range':\r\n            // input\r\n            case 'date':\r\n            case 'time':\r\n            case 'datetime':\r\n            case 'datetime-local':\r\n            case 'week':\r\n            case 'month':\r\n            case 'year':\r\n            // input\r\n            case 'color':\r\n            // textarea\r\n            case 'textarea':\r\n                if (holder.hasOwnProperty(elem.name)) break;\r\n                Object.defineProperty(holder, elem.name, { value: elem.value });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    return holder;\r\n};\r\n\r\n\r\nexport const setFormValues = (\r\n    form: HTMLFormElement | string,\r\n    data: object\r\n): void => {\r\n    let objForm = form instanceof HTMLFormElement ?\r\n        form :\r\n        document.querySelector(form) as HTMLFormElement;\r\n    if ('FORM' !== objForm.tagName.toUpperCase()) return;\r\n\r\n\r\n    for (let name of Object.keys(data)) {\r\n        // @ts-ignore\r\n        const value = data[name];\r\n        // @ts-ignore\r\n        const elements = objForm.querySelectorAll(`input[name='${name}'],select[name='${name}'],textarea[name='${name}']`) as Array<Element>;\r\n        if (0 === elements.length) continue;\r\n\r\n        switch (elements[0].type) {\r\n            case 'radio':\r\n                for (let item of elements) {\r\n                    if ('radio' === item.type) {\r\n                        item.checked = (value == item.value);\r\n                    }\r\n                } break;\r\n            case 'checkbox':\r\n                for (let item of elements) {\r\n                    if ('checkbox' === item.type) {\r\n                        item.checked = (value as Array<string>).some(x => x == item.value);\r\n                    }\r\n                } break;\r\n            case 'file':\r\n                elements[0].click();\r\n            default:\r\n                elements[0].value = value;\r\n                break;\r\n        }\r\n    }\r\n};\r\n\r\n\r\n/**\r\n *\r\n * @param sel\r\n * @param data\r\n */\r\nexport const setSelectOptions = (\r\n    sel: HTMLSelectElement | string,\r\n    data: Array<{ title: string, value: string }>\r\n): void => {\r\n    let obj = sel instanceof HTMLSelectElement ?\r\n        sel :\r\n        document.querySelector(sel) as HTMLSelectElement;\r\n    if ('SELECT' !== obj.tagName.toUpperCase()) return;\r\n    obj.options.length = 0;\r\n    data.forEach(element => {\r\n        obj.add(new Option(element.title, element.value));\r\n    });\r\n};\r\n\r\n\r\n// export interface onAddInputCallback {\r\n//     (\r\n//         label: HTMLLabelElement,\r\n//         input: HTMLInputElement,\r\n//         span: HTMLSpanElement\r\n//     ): any\r\n// };\r\n// export const addInputs = (\r\n//     holder: HTMLElement | string,\r\n//     data: Array<{ title: string, value: string, after: boolean }>,\r\n//     callback?: onAddInputCallback\r\n// ): void => {\r\n//     let obj = holder instanceof HTMLElement ?\r\n//         holder :\r\n//         document.querySelector(holder) as HTMLElement;\r\n//     if (null === obj) return;\r\n\r\n//     data.forEach(element => {\r\n//         let label = document.createElement('label') as HTMLLabelElement;\r\n//         let span = document.createElement('span') as HTMLSpanElement;\r\n//         let input = document.createElement('input') as HTMLInputElement;\r\n\r\n//         span.innerHTML = element.title;\r\n//         input.value = element.value;\r\n//         if (undefined !== callback) callback(label, input, span);\r\n//         if (true === element.after) {\r\n//             label.appendChild(input);\r\n//             label.appendChild(span);\r\n//         } else {\r\n//             label.appendChild(span);\r\n//             label.appendChild(input);\r\n//         }\r\n//         obj.appendChild(label);\r\n//     });\r\n// };\r\n"],"sourceRoot":""}